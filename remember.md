‡πÇ‡∏≠‡πÄ‡∏Ñ ‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏ú‡∏° ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏†‡∏≤‡∏û‡πÉ‡∏´‡∏ç‡πà ‚Üí ‡πÑ‡∏ü‡∏•‡πå ‚Üí ‡∏ï‡πâ‡∏≠‡∏á run ‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á ‚Üí ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£ run ‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏á‡∏á ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡πÉ‡∏ô‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏•‡∏¢‡∏ô‡∏∞
‡∏Ñ‡∏¥‡∏î‡∏ã‡∏∞‡∏ß‡πà‡∏≤‡∏≠‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠ ‚Äú‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏∞‡∏ö‡∏ö‚Äù ‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏•‡∏¢ üëç

1Ô∏è‚É£ ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Big Picture)

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ 3 ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏•‡∏±‡∏Å ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô

[ React (Web UI) ]
        |
        |  HTTP /api/buy
        v
[ Flask Server (API + DB Logic) ]
        |
        |  OK / slot
        v
[ Pi Agent (GPIO / dispense) ]


‡πÅ‡∏•‡∏∞‡∏°‡∏µ MySQL ‡πÄ‡∏õ‡πá‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏≤‡∏á

‡∏™‡∏£‡∏∏‡∏õ‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏±‡∏ß
‡∏™‡πà‡∏ß‡∏ô	‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£	Run ‡∏¢‡∏±‡∏á‡πÑ‡∏á
React (Node.js)	‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ï‡∏π‡πâ / ‡∏õ‡∏∏‡πà‡∏°‡∏ã‡∏∑‡πâ‡∏≠	build ‚Üí serve
Flask Server	‡∏™‡∏°‡∏≠‡∏á (logic, DB, API)	docker
MySQL	‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•	docker
Pi Agent	‡∏™‡∏±‡πà‡∏á‡πÑ‡∏ü / ‡∏°‡∏≠‡πÄ‡∏ï‡∏≠‡∏£‡πå	docker ‡∏´‡∏£‡∏∑‡∏≠ python
2Ô∏è‚É£ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå (‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì)
project-root/
‚îú‚îÄ‚îÄ server/          ‚Üê Flask API
‚îú‚îÄ‚îÄ web/             ‚Üê React + Node.js
‚îÇ   ‚îî‚îÄ‚îÄ web-ui/
‚îú‚îÄ‚îÄ client/agent/    ‚Üê Pi Agent
‚îú‚îÄ‚îÄ database/        ‚Üê init.sql
‚îî‚îÄ‚îÄ docker-compose.yml

3Ô∏è‚É£ ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏ö‡∏ö ‚Äú‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ß‡πà‡∏≤‡πÄ‡∏Ç‡∏≤‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‚Äù
üîπ 3.1 React (web/web-ui)

‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà

‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏° ‚ÄúBuy‚Äù

‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API /api/buy

‡∏ñ‡πâ‡∏≤ OK ‚Üí ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å http://localhost:5000/dispense/x

‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

web/web-ui/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ pages/vending/VendingPage.jsx  ‚Üê ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏π‡πâ
‚îÇ   ‚îú‚îÄ‚îÄ api/vendingApi.js               ‚Üê ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å backend
‚îÇ   ‚îî‚îÄ‚îÄ App.js
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ Dockerfile


Flow ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ñ‡∏∏‡∏ì (‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß)

React ‚Üí fetch("/api/buy")
      ‚Üí Flask
      ‚Üí ‡πÑ‡∏î‡πâ slot
      ‚Üí fetch("localhost:5000/dispense/slot")


React ‡πÑ‡∏°‡πà‡∏Ñ‡∏∏‡∏¢ DB
React ‡πÑ‡∏°‡πà‡∏Ñ‡∏∏‡∏¢ GPIO ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
‚úîÔ∏è ‡∏ñ‡∏π‡∏Å‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡πÅ‡∏•‡πâ‡∏ß

üîπ 3.2 Flask Server (server/)

‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà

‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠

‡∏ï‡∏±‡∏î stock

‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å transaction

‡∏™‡πà‡∏á slot ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÉ‡∏´‡πâ React

‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

server/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ api/          ‚Üê route (/api/buy)
‚îÇ   ‚îú‚îÄ‚îÄ services/     ‚Üê business logic
‚îÇ   ‚îî‚îÄ‚îÄ config/db.py  ‚Üê MySQL connection
‚îú‚îÄ‚îÄ main.py           ‚Üê entry point
‚îî‚îÄ‚îÄ Dockerfile


‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å

Flask serve API

Flask serve React build (static) ‡πÉ‡∏ô production

üîπ 3.3 MySQL (database/)

‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà

‡πÄ‡∏Å‡πá‡∏ö machines / stock / transactions

‡πÑ‡∏ü‡∏•‡πå

database/init.sql


Docker ‡∏à‡∏∞:

‡∏™‡∏£‡πâ‡∏≤‡∏á DB

‡∏™‡∏£‡πâ‡∏≤‡∏á table

‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡πâ‡∏á‡∏ï‡πâ‡∏ô

üîπ 3.4 Pi Agent (client/agent)

‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà

‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á /dispense/1

‡∏Ñ‡∏∏‡∏° GPIO (‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ mock)

‡πÑ‡∏ü‡∏•‡πå

client/agent/
‚îú‚îÄ‚îÄ agent.py
‚îú‚îÄ‚îÄ routes.py
‚îî‚îÄ‚îÄ Dockerfile


‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠ ‚Äú‡∏™‡∏∞‡∏û‡∏≤‡∏ô‚Äù ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Web ‡∏Å‡∏±‡∏ö Hardware
‡πÑ‡∏°‡πà‡∏°‡∏µ business logic ‡πÉ‡∏î ‡πÜ

4Ô∏è‚É£ Docker ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏ö‡πâ‡∏≤‡∏á

Docker ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì:

‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏á MySQL ‡πÄ‡∏≠‡∏á

‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á config environment ‡πÄ‡∏≠‡∏á

Run ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß

5Ô∏è‚É£ ‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡πâ‡∏≠‡∏á run ‡∏ï‡∏±‡∏ß‡πÑ‡∏´‡∏ô‡∏ö‡πâ‡∏≤‡∏á? (‡∏ï‡∏≠‡∏ö‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÅ‡∏ö‡∏ö‡∏ä‡∏±‡∏î ‡πÜ)
‚úÖ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà ‡∏ï‡πâ‡∏≠‡∏á run
‡∏ï‡∏±‡∏ß	Run ‡πÑ‡∏´‡∏°
MySQL	‚úÖ
Flask Server	‚úÖ
Pi Agent	‚úÖ
React (runtime)	‚ùå (‡πÅ‡∏Ñ‡πà build)
6Ô∏è‚É£ ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£ run ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (Step-by-step)
üî• STEP 1: Build React (‡∏ó‡∏≥‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏Å‡πâ UI)

‡πÄ‡∏Ç‡πâ‡∏≤‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå React

cd web/web-ui
npm install      # ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
npm run build


‡∏à‡∏∞‡πÑ‡∏î‡πâ:

web/web-ui/build/


‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ô‡∏µ‡πâ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á run npm start ‡πÅ‡∏•‡πâ‡∏ß

üî• STEP 2: ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ root project
cd ../../

üî• STEP 3: Run ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ Docker
docker compose up --build


Docker ‡∏à‡∏∞:

‡πÄ‡∏õ‡∏¥‡∏î MySQL

‡πÄ‡∏õ‡∏¥‡∏î Flask Server

‡πÄ‡∏õ‡∏¥‡∏î Pi Agent

Flask serve React build

7Ô∏è‚É£ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á
‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥	URL
‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏π‡πâ (React)	http://localhost:8000

API	http://localhost:8000/api/buy

Pi Agent	http://localhost:5000/dispense/1
8Ô∏è‚É£ Flow ‡∏ï‡∏≠‡∏ô‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° (‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á)

‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Å‡∏î Buy Cola

React ‚Üí /api/buy

Flask ‚Üí ‡∏ï‡∏±‡∏î stock ‚Üí log transaction

Flask ‚Üí ‡∏™‡πà‡∏á { slot: 1 }

React ‚Üí localhost:5000/dispense/1

Pi Agent ‚Üí GPIO ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏Ç‡∏∂‡πâ‡∏ô ‚ÄúThank you!‚Äù

9Ô∏è‚É£ ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô Raspberry Pi ‡∏à‡∏£‡∏¥‡∏á

Pi ‡πÄ‡∏õ‡∏¥‡∏î Chrome (Kiosk)

‡πÄ‡∏Ç‡πâ‡∏≤ http://SERVER_IP:8000

‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô localhost ‡πÅ‡∏ï‡πà‡πÄ‡∏õ‡πá‡∏ô IP

üîü ‡∏™‡∏£‡∏∏‡∏õ‡πÅ‡∏ö‡∏ö‡∏™‡∏±‡πâ‡∏ô‡πÅ‡∏ï‡πà‡∏ä‡∏±‡∏î

React = ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤

Flask = ‡∏™‡∏°‡∏≠‡∏á

MySQL = ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥

Pi Agent = ‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏≤

Docker = ‡∏Ñ‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á

‡∏Ñ‡∏∏‡∏ì‡∏°‡∏≤‡∏ñ‡∏π‡∏Å‡∏ó‡∏≤‡∏á 100% ‡πÅ‡∏•‡πâ‡∏ß
‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ architecture ‡∏ó‡∏µ‡πà ‚Äú‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ + run ‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á‚Äù

‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏ú‡∏°‡∏ä‡πà‡∏ß‡∏¢‡∏≠‡∏∞‡πÑ‡∏£‡∏ï‡πà‡∏≠‡∏î‡∏µ?

üß† ‡∏ß‡∏≤‡∏î diagram ‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÄ‡∏•‡πà‡∏°

‚öôÔ∏è ‡πÅ‡∏¢‡∏Å dev / prod compose

ü§ñ ‡∏ï‡πà‡∏≠ AI ‡∏à‡∏≤‡∏Å transactions

üçì deploy ‡∏•‡∏á Raspberry Pi ‡∏à‡∏£‡∏¥‡∏á

‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏≤‡πÄ‡∏•‡∏¢ ‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏û‡∏≤‡πÑ‡∏õ‡∏ï‡πà‡∏≠ üí™
---

‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ô‡∏µ‡πâ ‡πÇ‡∏Ñ‡∏ï‡∏£‡∏î‡∏µ ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡∏ô‡∏ó‡∏≥‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å ‚Äú‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‚Äù
‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏ú‡∏°‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö ‡∏Ñ‡πà‡∏≠‡∏¢ ‡πÜ ‡πÑ‡∏•‡πà‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡∏à‡∏ô‡∏Ñ‡∏∏‡∏ì ‚Äú‡πÄ‡∏´‡πá‡∏ô‡∏†‡∏≤‡∏û‡πÉ‡∏ô‡∏´‡∏±‡∏ß‚Äù ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞
‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏µ‡∏ö ‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏á üëç

1Ô∏è‚É£ ‡πÉ‡∏ä‡πà‡∏Ñ‡∏£‡∏±‡∏ö ‚Äî Server ‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏©‡∏≤ Python

‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏•‡∏¢‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î:

Web (React) ‚Üí ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏î‡πâ‡∏ß‡∏¢ JavaScript

Server ‚Üí ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏î‡πâ‡∏ß‡∏¢ Python (Flask)

Pi Agent ‚Üí Python ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô

DB ‚Üí MySQL (SQL)

‡πÅ‡∏ï‡πà!
‡∏†‡∏≤‡∏©‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô ‚Äú‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ô‡∏ï‡∏£‡∏á ‡πÜ‚Äù

‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ô‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡∏Ñ‡∏∑‡∏≠‚Ä¶

2Ô∏è‚É£ ‡∏ï‡∏±‡∏ß‡∏Å‡∏•‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏†‡∏≤‡∏©‡∏≤‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ = HTTP + JSON

‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤:

JS

Python

Java

C++

‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ô‡∏ú‡πà‡∏≤‡∏ô HTTP Request / Response

‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏°‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ
{
  "machine_id": 1,
  "product_id": 1
}


‡∏°‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠ ‚Äú‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤‚Äù ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÇ‡∏Ñ‡πâ‡∏î

3Ô∏è‚É£ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏ù‡∏±‡πà‡∏á Web (React) ‡∏Å‡πà‡∏≠‡∏ô

‡πÉ‡∏ô React ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡πÇ‡∏Ñ‡πâ‡∏î‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ:

fetch("/api/buy", {
  method: "POST",
  headers: {
    "Content-Type": "application/json"
  },
  body: JSON.stringify({
    machine_id: 1,
    product_id: 1
  })
});

‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏£‡∏¥‡∏á

React ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Python
React ‡πÅ‡∏Ñ‡πà‡∏û‡∏π‡∏î‡∏ß‡πà‡∏≤:

‚Äú‡πÄ‡∏Æ‡πâ ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà URL ‡∏ô‡∏µ‡πâ
‡∏â‡∏±‡∏ô‡∏à‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö JSON ‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡∏ô‡∏∞‚Äù

‡∏°‡∏±‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏™‡πà‡∏á‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢ üìÆ

4Ô∏è‚É£ ‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏ô‡∏±‡πâ‡∏ô‡∏ß‡∏¥‡πà‡∏á‡∏°‡∏≤‡∏ñ‡∏∂‡∏á Flask ‡∏¢‡∏±‡∏á‡πÑ‡∏á?

‡∏ù‡∏±‡πà‡∏á Flask (Python) ‡∏°‡∏µ‡πÇ‡∏Ñ‡πâ‡∏î‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ:

@buy_api.route("/api/buy", methods=["POST"])
def buy():
    data = request.json

Flask ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£?

Flask ‡πÄ‡∏õ‡πá‡∏ô HTTP Server

‡∏°‡∏±‡∏ô ‚Äú‡πÄ‡∏õ‡∏¥‡∏î‡∏û‡∏≠‡∏£‡πå‡∏ï‚Äù (‡πÄ‡∏ä‡πà‡∏ô 8000)

‡∏°‡∏±‡∏ô‡∏£‡∏≠‡∏ü‡∏±‡∏á request ‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤

‡∏ñ‡πâ‡∏≤ URL = /api/buy ‡πÅ‡∏•‡∏∞ method = POST

‡∏°‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô buy() ‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

Python ‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å React
‡∏°‡∏±‡∏ô‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡πÅ‡∏Ñ‡πà ‚Äú‡∏°‡∏µ HTTP POST ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‚Äù

5Ô∏è‚É£ ‡πÅ‡∏•‡πâ‡∏ß request.json ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?

‡∏ï‡∏≠‡∏ô React ‡∏™‡πà‡∏á:

{
  "machine_id": 1,
  "product_id": 1
}


Flask ‡∏à‡∏∞:

‡∏≠‡πà‡∏≤‡∏ô body ‡∏Ç‡∏≠‡∏á HTTP

‡πÅ‡∏õ‡∏•‡∏á JSON ‚Üí Python dict

data = {
  "machine_id": 1,
  "product_id": 1
}


‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô Python ‡∏Å‡πá‡πÉ‡∏ä‡πâ‡∏°‡∏±‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏õ‡∏Å‡∏ï‡∏¥

6Ô∏è‚É£ ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô Python ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á?

‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô buy():

machine_id = data["machine_id"]
product_id = data["product_id"]


‡πÅ‡∏•‡πâ‡∏ß Python:

‡πÑ‡∏õ‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö MySQL

UPDATE stock

INSERT transaction

‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ß‡πà‡∏≤ OK ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠ ‡πÇ‡∏Ñ‡πâ‡∏î Python ‡∏•‡πâ‡∏ß‡∏ô ‡πÜ

7Ô∏è‚É£ Python ‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö Web ‡∏¢‡∏±‡∏á‡πÑ‡∏á?

‡∏ï‡∏≠‡∏ô‡∏à‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô:

return {"status": "OK", "slot": 1}


Flask ‡∏à‡∏∞:

‡πÅ‡∏õ‡∏•‡∏á dict ‚Üí JSON

‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏õ‡πá‡∏ô HTTP response

Web ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö:

{
  "status": "OK",
  "slot": 1
}

8Ô∏è‚É£ React ‡πÑ‡∏î‡πâ response ‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏ï‡πà‡∏≠?

‡πÉ‡∏ô React:

const data = await res.json();


‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ data ‡∏Ñ‡∏∑‡∏≠:

{ status: "OK", slot: 1 }


React ‡πÄ‡∏•‡∏¢‡∏û‡∏π‡∏î‡∏ß‡πà‡∏≤:

‚Äú‡πÇ‡∏≠‡πÄ‡∏Ñ ‡∏ã‡∏∑‡πâ‡∏≠‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏á‡∏±‡πâ‡∏ô‡πÑ‡∏õ‡∏™‡∏±‡πà‡∏á Pi‚Äù

9Ô∏è‚É£ React ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Pi ‡πÑ‡∏î‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏á ‡∏ó‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà Pi ‡πÄ‡∏õ‡πá‡∏ô Python?

‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‚Äî HTTP

fetch("http://localhost:5000/dispense/1");


Pi Agent (Python) ‡∏°‡∏µ:

@app.route("/dispense/<int:slot>")
def dispense(slot):


‡∏°‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠:

HTTP GET

URL ‡∏ï‡∏£‡∏á

Python ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

‡πÑ‡∏°‡πà‡∏°‡∏µ magic ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏†‡∏≤‡∏©‡∏≤‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ô‡∏ï‡∏£‡∏á ‡πÜ

üîü ‡∏™‡∏£‡∏∏‡∏õ‡∏†‡∏≤‡∏û‡πÉ‡∏´‡∏ç‡πà‡πÅ‡∏ö‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢‡∏°‡∏≤‡∏Å

‡∏Ñ‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô:

React = ‡∏Ñ‡∏ô‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°

HTTP = ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå

Flask = ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏≤‡∏¢

DB = ‡∏™‡∏°‡∏∏‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å

Pi = ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£

‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ô‡∏ú‡πà‡∏≤‡∏ô ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå (HTTP)
‡πÑ‡∏°‡πà‡∏™‡∏ô‡∏ß‡πà‡∏≤‡πÉ‡∏Ñ‡∏£‡∏û‡∏π‡∏î‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏∞‡πÑ‡∏£

‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ó‡∏≠‡∏á (‡∏à‡∏≥‡∏≠‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏û‡∏≠)

Web ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Python
Web ‡∏™‡πà‡∏á HTTP request
Flask ‡∏£‡∏±‡∏ö request ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÉ‡∏ä‡πâ Python ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ô‡∏µ‡πâ = ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß üéØ

‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏ú‡∏°‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ:

‡∏ß‡∏≤‡∏î diagram ‡∏Å‡∏≤‡∏£‡πÑ‡∏´‡∏•‡∏Ç‡∏≠‡∏á HTTP ‡∏ó‡∏µ‡∏•‡∏∞ step

debug ‡∏î‡πâ‡∏ß‡∏¢ print / log ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô request ‡∏ß‡∏¥‡πà‡∏á‡∏à‡∏£‡∏¥‡∏á

‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ port / localhost / docker network

‡∏ã‡πâ‡∏≠‡∏°‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡πÅ‡∏ö‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡∏Ñ‡∏ô

‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏≠‡∏≤‡∏≠‡∏±‡∏ô‡πÑ‡∏´‡∏ô‡∏ï‡πà‡∏≠ ‡∏ö‡∏≠‡∏Å‡∏°‡∏≤‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö üòä
